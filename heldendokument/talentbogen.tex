\input{common.tex}

\begin{document}

\begin{dsaCharacterSheet}
\setwp{}

\vspace*{4pt}
\begin{dsaSheetBox}[\textwidth]%

    \vspace*{-3pt}
    \begin{tabular}{llllllllllllllllll}%
        MU: & \smallnum{\FroEigAktuell{0}} &
        KL: & \smallnum{\FroEigAktuell{1}} &
        IN: & \smallnum{\FroEigAktuell{2}} &
        CH: & \smallnum{\FroEigAktuell{3}} &
        FF: & \smallnum{\FroEigAktuell{4}} &
        GE: & \smallnum{\FroEigAktuell{5}} &
        KO: & \smallnum{\FroEigAktuell{6}} &
        KK: & \smallnum{\FroEigAktuell{7}} & \hspace{10pt}
        BE: & \smallnum{\KamRusResultierendeBehinderung}
    \end{tabular}
\end{dsaSheetBox}

\vspace{-16pt}
\begin{center}
    \huge \shadowtext{Sonderfertigkeiten \& Talente}%
\end{center}%
\vspace{-8pt}

\begin{dsaSheetBox}[\textwidth]

    \renewcommand{\arraystretch}{1}
    \setlength{\tabcolsep}{1pt}
    \normalfont\bfseries
    \newcommand{\Sonderfertigkeiten}[1]{
        \raisebox{0.45ex}{\textmansontt{\Large Sonderfertigkeiten (außer Kampf)}}

        \tiny
        \begin{tabular}{p{.5\textwidth-.5\columnsep-.5\fboxsep}} \hline
            \forloop{ct}{0}{\value{ct} < #1}%
            {%
              \mediumtext{\TalSonderfertigkeiten{\thect}}{.5\textwidth-.5\columnsep-.5\fboxsep}{} \\ \hline
            }
        \end{tabular}
    }
    \newcommand{\Kampftechniken}[1]{
        \tiny
        \ifcase\MSpalte\relax
            \begin{tabular}{p{0.2cm}|p{4.6cm}|p{0.4cm}|p{1cm}|p{0.7cm}!{\footnotesize\raisebox{-0.2pt}{•}}p{0.7cm}|p{0.8cm}}
                \multicolumn{3}{l|}{\Large \raisebox{0.35ex}{\textmansontt{Kampftechniken}}} & \footnotesize\centering BE & \footnotesize\centering AT & \footnotesize\centering PA & \footnotesize\hspace{0.5pt} TaW
                \forloop{ct}{0}{\value{ct} < #1}{%
                    \\ \hline
                    \checkBox[\symbolchoice{star}\BC{}]{\TalTalSpezielleErfahrung{0}{\thect}}{0.2cm}{0.2cm}{on} &
                    \ifthenelse{\equal{\TalenteInCombo}{1}}{
                        \raisebox{-0.1ex}{\comboBox[\Ff\FfEdit\ui{value={\KampftechnikenBasis{\thect}{0}}}\textSize{8}\W{0}]{\TalTalName{0}{\thect}}{4.6cm}{10pt}{\KampftechnikenTalentliste}}
                    }{
                        \smalltext{\TalTalName{0}{\thect}}{4.6cm}{\KampftechnikenBasis{\thect}{0}}
                    } &
                    \smalltext[centered]{\TalTalSteigerungsspalte{0}{\thect}}{0.4cm}{\KampftechnikenBasis{\thect}{1}} &
                    \smalltext[centered]{\TalTalBehinderung{0}{\thect}}{1cm}{\KampftechnikenBasis{\thect}{2}} &
                    \smalltext[centered]{\TalTalAttacke{0}{\thect}}{0.7cm}{} &
                    \smalltext[centered]{\TalTalParade{0}{\thect}}{0.7cm}{} &
                    \smalltext[centered]{\TalTalTalentwert{0}{\thect}}{0.8cm}{}%
                    % https://www.youtube.com/watch?v=hOo5yr76RJs
                } \\ \hline
            \end{tabular}
        \else
            \begin{tabular}{p{0.2cm}|p{4.15cm}|p{0.4cm}|p{1cm}|p{0.7cm}!{\footnotesize\raisebox{-0.2pt}{•}}p{0.7cm}|p{0.8cm}|p{0.4cm}}
                \multicolumn{3}{l|}{\Large \raisebox{0.35ex}{\textmansontt{Kampftechniken}}} & \footnotesize\centering BE & \footnotesize\centering AT & \footnotesize\centering PA & \footnotesize\hspace{0.5pt} TaW & \footnotesize\hspace{1pt} M
                \forloop{ct}{0}{\value{ct} < #1}{%
                    \\ \hline
                    \checkBox[\symbolchoice{star}\BC{}]{\TalTalSpezielleErfahrung{0}{\thect}}{0.2cm}{0.2cm}{on} &
                    \ifthenelse{\equal{\TalenteInCombo}{1}}{
                        \raisebox{-0.1ex}{\comboBox[\Ff\FfEdit\ui{value={\KampftechnikenBasis{\thect}{0}}}\textSize{8}\W{0}]{\TalTalName{0}{\thect}}{4.15cm}{10pt}{\KampftechnikenTalentliste}}
                    }{
                        \smalltext{\TalTalName{0}{\thect}}{4.15cm}{\KampftechnikenBasis{\thect}{0}}
                    } &
                    \smalltext[centered]{\TalTalSteigerungsspalte{0}{\thect}}{0.4cm}{\KampftechnikenBasis{\thect}{1}} &
                    \smalltext[centered]{\TalTalBehinderung{0}{\thect}}{1cm}{\KampftechnikenBasis{\thect}{2}} &
                    \smalltext[centered]{\TalTalAttacke{0}{\thect}}{0.7cm}{} &
                    \smalltext[centered]{\TalTalParade{0}{\thect}}{0.7cm}{} &
                    \smalltext[centered]{\TalTalTalentwert{0}{\thect}}{0.8cm}{} &
                    \shifttext{-0.1cm}{\smalltext[centered]{\TalTalMSpalte{0}{\thect}}{0.6cm}{}}%
                } \\ \hline
            \end{tabular}
        \fi

        \vspace{8pt}
    }

    \newcommand{\SprachenSchriften}[1]{
        \begin{tabular}{p{0.2cm}|p{6.85cm}|p{1cm}|p{0.8cm}}
            \multicolumn{2}{l|}{\Large \raisebox{0.35ex}{\textmansontt{Sprachen \& Schriften}}} &
            \footnotesize\centering Komp. & \footnotesize\hspace{0.5pt} TaW
            \forloop{ct}{0}{\value{ct} < #1}{%
                \\ \hline
                \checkBox[\symbolchoice{star}\BC{}]{\TalTalSpezielleErfahrung{5}{\thect}}{0.2cm}{0.2cm}{on} &
                \ifthenelse{\equal{\thect}{0}}{
                    \normalfont\fontsize{8pt}{1em}\selectfont Muttersprache:
                    \ifthenelse{\equal{\TalenteInCombo}{1}}{
                        \raisebox{-0.1ex}{\comboBox[\Ff\FfEdit\textSize{8}\W{0}]{\TalTalName{5}{\thect}}{5cm}{10pt}{\SprachenTalentliste}}
                    }{
                        \smalltext{\TalTalName{5}{\thect}}{5cm}{}
                    } &
                }{
                    \ifthenelse{\equal{\TalenteInCombo}{1}}{
                        \raisebox{-0.1ex}{\comboBox[\Ff\FfEdit\textSize{8}\W{0}]{\TalTalName{5}{\thect}}{6.85cm}{10pt}{\SprachenTalentliste}}
                    }{
                        \smalltext{\TalTalName{5}{\thect}}{6.85cm}{}
                    } &
                }
                \smalltext[centered]{\TalTalKomplexitat{5}{\thect}}{1cm}{} &
                \smalltext[centered]{\TalTalTalentwert{5}{\thect}}{0.8cm}{}%
            } \\ \hline
        \end{tabular}

        \vspace{8pt}
    }

    \newcommand{\Talentliste}[7]{% #1=Talentgruppenindex, #2=Anzeigename, #3=Anzahl, #4=Mirakel?, #5=BE?, #6=Voreingestellte Werte, #7=Mögliche Werte
        \tiny
        \ifcase#4\relax
            \ifcase#5\relax
                \begin{tabular}{p{0.2cm}|p{5.8cm}|p{0.5cm}!{\footnotesize•}p{0.5cm}!{\footnotesize•}p{0.5cm}|p{0.8cm}}
                    \multicolumn{5}{l|}{\Large \raisebox{0.35ex}{\textmansontt{#2}}} & \footnotesize\hspace{0.5pt} TaW
                    \forloop{ct}{0}{\value{ct} < #3}{%
                        \\ \hline
                        \checkBox[\symbolchoice{star}\BC{}]{\TalTalSpezielleErfahrung{#1}{\thect}}{0.2cm}{0.2cm}{on} &
                        \ifthenelse{\equal{\TalenteInCombo}{1}}{
                            \raisebox{-0.3ex}{\comboBox[\Ff\FfEdit\ui{value={#6{\thect}{0}}}\textSize{8}\W{0}]{\TalTalName{#1}{\thect}}{5.8cm}{10pt}{#7}}
                        }{
                            \smalltext{\TalTalName{#1}{\thect}}{5.8cm}{#6{\thect}{0}}
                        } &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschafta{#1}{\thect}}{0.7cm}{#6{\thect}{1}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftb{#1}{\thect}}{0.7cm}{#6{\thect}{2}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftc{#1}{\thect}}{0.6cm}{#6{\thect}{3}}} &
                        \smalltext[centered]{\TalTalTalentwert{#1}{\thect}}{0.8cm}{}%
                    } \\ \hline
                \end{tabular}
            \else
                \begin{tabular}{p{0.2cm}|p{4.7cm}|p{0.5cm}!{\footnotesize•}p{0.5cm}!{\footnotesize•}p{0.5cm}|p{1.0cm}|p{0.8cm}|p{0.4cm}}
                    \multicolumn{5}{l|}{\Large \raisebox{0.35ex}{\textmansontt{#2}}} & \footnotesize\centering BE & \footnotesize\hspace{0.5pt} TaW
                    \forloop{ct}{0}{\value{ct} < #3}{%
                        \\ \hline
                        \checkBox[\symbolchoice{star}\BC{}]{#1-SE\thect}{0.2cm}{0.2cm}{on} &
                        \ifthenelse{\equal{\TalenteInCombo}{1}}{
                            \raisebox{-0.1ex}{\comboBox[\Ff\FfEdit\ui{value={#6{\thect}{0}}}\textSize{8}\W{0}]{\TalTalName{#1}{\thect}}{4.7cm}{10pt}{#7}}
                        }{
                            \smalltext{\TalTalName{#1}{\thect}}{4.7cm}{#6{\thect}{0}}
                        } &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschafta{#1}{\thect}}{0.7cm}{#6{\thect}{1}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftb{#1}{\thect}}{0.7cm}{#6{\thect}{2}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftc{#1}{\thect}}{0.6cm}{#6{\thect}{3}}} &
                        \smalltext[centered]{\TalTalBehinderung{#1}{\thect}}{1cm}{#6{\thect}{4}} &
                        \smalltext[centered]{\TalTalBehinderung{#1}{\thect}}{0.8cm}{}%
                    } \\ \hline
                \end{tabular}
            \fi
        \else
            \ifcase#5
                \begin{tabular}{p{0.2cm}|p{5.4cm}|p{0.5cm}!{\footnotesize•}p{0.5cm}!{\footnotesize•}p{0.5cm}|p{0.8cm}|p{0.4cm}}
                    \multicolumn{5}{l|}{\Large \raisebox{0.35ex}{\textmansontt{#2}}} & \footnotesize\hspace{0.5pt} TaW & \footnotesize\hspace{1pt} M
                    \forloop{ct}{0}{\value{ct} < #3}{%
                        \\ \hline
                        \checkBox[\symbolchoice{star}\BC{}]{\TalTalSpezielleErfahrung{#1}{\thect}}{0.2cm}{0.2cm}{on} &
                        \ifthenelse{\equal{\TalenteInCombo}{1}}{
                            \raisebox{-0.3ex}{\comboBox[\Ff\FfEdit\ui{value={#6{\thect}{0}}}\textSize{8}\W{0}]{\TalTalName{#1}{\thect}}{5.4cm}{10pt}{#7}}
                        }{
                            \smalltext{\TalTalName{#1}{\thect}}{5.4cm}{#6{\thect}{0}}
                        } &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschafta{#1}{\thect}}{0.7cm}{#6{\thect}{1}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftb{#1}{\thect}}{0.7cm}{#6{\thect}{2}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftc{#1}{\thect}}{0.6cm}{#6{\thect}{3}}} &
                        \smalltext[centered]{\TalTalTalentwert{#1}{\thect}}{0.8cm}{} &
                        \shifttext{-0.1cm}{\smalltext[centered]{\TalTalMSpalte{#1}{\thect}}{0.6cm}{}}%
                    } \\ \hline
                \end{tabular}
            \else
                \begin{tabular}{p{0.2cm}|p{4.3cm}|p{0.5cm}!{\footnotesize•}p{0.5cm}!{\footnotesize•}p{0.5cm}|p{1.0cm}|p{0.8cm}|p{0.4cm}}
                    \multicolumn{5}{l|}{\Large \raisebox{0.35ex}{\textmansontt{#2}}} & \footnotesize\centering BE & \footnotesize\hspace{0.5pt} TaW & \footnotesize\hspace{1pt} M
                    \forloop{ct}{0}{\value{ct} < #3}{%
                        \\ \hline
                        \checkBox[\symbolchoice{star}\BC{}]{\TalTalSpezielleErfahrung{#1}{\thect}}{0.2cm}{0.2cm}{on} &
                        \ifthenelse{\equal{\TalenteInCombo}{1}}{
                            \raisebox{-0.3ex}{\comboBox[\Ff\FfEdit\ui{value={#6{\thect}{0}}}\textSize{8}\W{0}]{\TalTalName{#1}{\thect}}{4.3cm}{10pt}{#7}}
                        }{
                            \smalltext{\TalTalName{#1}{\thect}}{4.3cm}{#6{\thect}{0}}
                        } &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschafta{#1}{\thect}}{0.7cm}{#6{\thect}{1}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftb{#1}{\thect}}{0.7cm}{#6{\thect}{2}}} &
                        \shifttext{-0.15cm}{\smalltext[centered]{\TalTalEigenschaftc{#1}{\thect}}{0.6cm}{#6{\thect}{3}}} &
                        \smalltext[centered]{\TalTalBehinderung{#1}{\thect}}{1cm}{#6{\thect}{4}} &
                        \smalltext[centered]{\TalTalTalentwert{#1}{\thect}}{0.8cm}{} &
                        \shifttext{-0.1cm}{\smalltext[centered]{\TalTalMSpalte{#1}{\thect}}{0.6cm}{}}%
                    } \\ \hline
                \end{tabular}
            \fi
        \fi

        \vspace{8pt}
    }
    \newcommand{\Gaben}[2][Gaben]{\Talentliste{7}{#1}{#2}{0}{0}{\leer}{}}
    \newcommand{\KoerperlicheTalente}[1]{\Talentliste{1}{Körperliche Talente}{#1}{\MSpalte}{1}{\KoerperBasis}{\KoerperTalentliste}}
    \newcommand{\GesellschaftlicheTalente}[1]{\Talentliste{2}{Gesellschaftliche Talente}{#1}{\MSpalte}{0}{\GesellschaftBasis}{\GesellschaftTalentliste}}
    \newcommand{\NaturTalente}[1]{\Talentliste{3}{Naturtalente}{#1}{\MSpalte}{0}{\NaturBasis}{\NaturTalentliste}}
    \newcommand{\WissensTalente}[1]{\Talentliste{4}{Wissenstalente}{#1}{\MSpalte}{0}{\WissenBasis}{\WissenTalentliste}}
    \newcommand{\HandwerklicheTalente}[1]{\Talentliste{6}{Handwerkliche Talente}{#1}{\MSpalte}{0}{\HandwerkBasis}{\HandwerkTalentliste}}

    \newcommand{\kampf}[4]{\ifcase#1#2\or#3\or#4\fi}
    \newcommand{\talent}[6]{\ifcase#1#2\or#3\or#4\or#5\or#6\fi}
    \newcommand{\sprache}[3]{\ifcase#1#2\or#3\fi}

    \newcommand{\leer}[2]{}

    \input{talentbogen-konfig.tex}

    \newcommand{\lparen}{(}
    \newcommand{\rparen}{)}
    \input{talentbogen-extern.tex}
    
    \setlength{\columnseprule}{1pt}
    \setlength{\columnsep}{4pt}
    \begin{multicols}{2}
        \TalenteLinks

    \columnbreak
        \hspace{1pt}\begin{minipage}{.5\textwidth-\columnsep}\TalenteRechts\vspace{-8pt}\end{minipage}%
    \end{multicols}
\end{dsaSheetBox}

%
\end{dsaCharacterSheet}

\end{document}